type: pipeline-template
version: 1

name: Java CI Pipeline with Security Scans
displayName: Java CI â€“ Build, Scan & Docker Image

description: >
  Build Java applications, run SonarQube and Trivy security scans,
  build Docker images using Kaniko, and generate SBOM reports.
  Image tags are automatically generated using the Jenkins build number.

parameters:
  - name: repoUrl
    type: string
    displayName: Git Repository URL
    description: URL of the Git repository containing the source code
    required: true

  - name: branchName
    type: string
    displayName: Git Branch
    description: Git branch to build from
    defaultValue: main

  - name: gitCredentials
    type: credentials
    displayName: Git Credentials
    description: Credentials used to access the Git repository
    required: true

  - name: imageName
    type: string
    displayName: Docker Image Name
    description: Docker image name (image tag = build number)
    defaultValue: gkamalakar1006/boardgames

  - name: sonarProjectKey
    type: string
    displayName: SonarQube Project Key
    description: SonarQube project key
    defaultValue: board_game
