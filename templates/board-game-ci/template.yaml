type: pipeline-template
version: 1

name: Java Maven CI with Trivy & Sonar
displayName: Java CI â€“ Maven, Trivy FS & SonarQube

description: >
  Standard Java CI pipeline using Maven.
  It checks out source code, restores Maven cache,
  runs a clean build, performs Trivy filesystem security scanning,
  and runs SonarQube analysis.
  Secrets such as Git and Sonar tokens are managed centrally
  via Jenkins credentials.

parameters:
  - name: repoUrl
    type: string
    displayName: Git Repository URL
    description: URL of the Git repository
    required: true

  - name: branchName
    type: string
    displayName: Git Branch
    description: Branch to build
    defaultValue: main

  - name: gitCredentials
    type: credentials
    displayName: Git Credentials
    description: Git PAT / SSH credentials stored in Jenkins
    required: true

  - name: sonarProjectKey
    type: string
    displayName: SonarQube Project Key
    description: Unique project key in SonarQube
    defaultValue: board_game
    required: true
    
