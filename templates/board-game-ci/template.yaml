type: pipeline-template
version: 1

name: Java Maven CI with Trivy & Sonar
displayName: Java CI â€“ Maven, Trivy FS & SonarQube

description: >
  Standard Java CI pipeline.
  Checks out source code from Git, restores Maven cache,
  runs a Maven clean build, performs Trivy filesystem scan,
  and runs SonarQube analysis.
  All secrets are managed via Jenkins credentials.

parameters:
  - name: repoUrl
    type: string
    displayName: Git Repository URL
    description: URL of the Git repository
    required: true

  - name: branchName
    type: string
    displayName: Git Branch
    description: Branch to build
    defaultValue: main

  - name: gitCredentials
    type: credentials
    displayName: Git Credentials
    description: Git PAT / SSH credentials stored in Jenkins
    required: true

  - name: sonarProjectKey
    type: string
    displayName: SonarQube Project Key
    description: Unique project key in SonarQube
    required: true
    
  - name: imageName
    type: string
    displayName: Docker Image Name
    description: Example: gkamalakar1006/boardgames
    required: true

